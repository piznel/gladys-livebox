!function(){"use strict";function e(e,r,i,t,n){var o=this;o.ipDecoder="",o.moduleId="",o.saveParams=function(){var t={name:"DECODEUR_LIVEBOX",value:o.ipDecoder,type:"hidden",module:o.moduleId};return i.update("DECODEUR_LIVEBOX",t).then(function(i){return function(i){/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(i)||reject(new Error("You entered invalid IP address!"));"1.1.1.1"===i&&reject(new Error('Please indicate the correct IP address of your decoder in the "DECODEUR_LIVEBOX" parameter.'));var t={name:"livebox decoder",protocol:"wifi",service:"livebox",identifier:i};return r.create(t,[{name:"Power",type:"binary",category:"television",identifier:"Power",sensor:!1,min:0,max:1},{name:"Mute",type:"push",identifier:"Mute",category:"television",sensor:!1,min:0,max:1}]).then(function(r){e.successNotification('device "livebox decoder" created, with id '+r.data.device.id)}).catch(function(r){e.errorNotification("error when creating the device and deviceTypes.")})}(o.ipDecoder)})},o.init=function(r,t){var n=document.getElementsByClassName("nav nav-tabs");n[0].parentNode.removeChild(n[0]),o.moduleId=r,o.moduleSlug=t,a=r,i.getByModule(a).then(function(r){o.params=r.data,"1.1.1.1"===o.params[0].value&&e.errorNotification("please enter the IP of the decoder and then run a configuration"),o.ipDecoder=o.params[0].value});var a}}angular.module("gladys").controller("liveboxCtrl",e),e.$inject=["notificationService","deviceService","paramService","moduleService","$scope"]}();